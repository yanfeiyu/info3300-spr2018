<html>
<head>
<title>INFO 3300 - Data-driven Web Applications</title>
<link href="https://fonts.googleapis.com/css?family=Alegreya|Alegreya+Sans" rel="stylesheet">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<style>
body { font-family: 'Alegreya Sans', Calibri, sans-serif; }
svg { border: solid #ccc 1px; }
</style>
</head>
<body>
<h3>Prompt for Friday, February 2</h3>

<div>
<ul>
	<li>Have a local web server running.</li>
	<li>We are now using <a href="https://d3js.org/">Mike Bostock's d3 library</a>. Start reading <a href="https://github.com/d3/d3/blob/master/API.md">the documentation to learn secret skills</a>.</li>
  <li>D3 versions: <tt>d3.something.something()</tt> is probably v3, <tt>d3.somethingSomething()</tt> is probably v4.</li>
</ul>
</div>

<div>Inspiration: the <a href="https://stackoverflow.blog/2018/01/11/brutal-lifecycle-javascript-frameworks/">The Brutal Lifecycle of JavaScript Frameworks</a> by Ian Allen.
</div>

<div>
	D3 is a library that makes it easy to create and manipulate page elements. It's not restricted to SVG elements, but that's what we'll usually use it for. We'll start by using d3 to select DOM elements, create new elements, and modify the content and appearance of elements. 
</div>

<!-- Here's a standard HTML div element with an ID and a class -->
<div id="d1" class="header">Hello!</div>

<!-- Here's an SVG canvas element. Note that in this file it looks like the <div> above. -->
<svg height="200" width="200">
  <!-- Visual elements are represented by tags, which have attributes -->
</svg>

<script id="notes">
// 1. How can we select elements? What is the difference between select() and selectAll()?
var div = document.getElementById("d1");
var d3Div = d3.select("#d1"); //or d3.select(div);
    
d3Div.text("aaàáa")
var divs = d3.selectAll("div");
    divs.size(); //=4. because there are 4 div section above.
    //divs.style("font-family","Helvetica");

// 2. How can we create new elements, and set their attributes and styles?  
    
var svg = d3.select("svg");
    svg.append("circle")
        .attr("r", 10)
        .style("fill", "pink")
        .on("click",function(){console.log("hi");});
function randomPixel(){
    return Math.random() * 200;
}
    
for (i = 0; i < 5; i++){
    svg.append("circle")
        .attr("r", 10)
        .attr("cx", randomPixel())
        .attr("cy", randomPixel())
        .style("fill", "pink");
}

var list = [5,6,7,8,9];
list.forEach(function (d, i){
             console.log("current element is " + d + "; current index is "+ i);
             });
    
list.forEach(function (d, i){
    svg.append("circle")
        .attr("r", 10)
        .attr("cx", randomPixel())
        .attr("cy", randomPixel())
        .style("fill", "grey");
        });
// 3. How do we update the attributes of existing elements? 
    
d3.selectAll("circle").transition().delay(500).duration(500).style("fill","orange");
    
d3.selectAll("circle").transition().delay(1500).duration(500).style("cx",randomPixel());
    
</script>

<!-- This block will be automatically filled with syntax-highlighted code from the script below -->
<pre><code id="display">
</code></pre>


<script>
document.getElementById("display").innerText = document.getElementById("notes").innerText;
hljs.initHighlightingOnLoad();
</script>


</body>
</html>
